controller: 
  serviceType: NodePort
  nodePort: 30808
  installPlugins: []
    # Kubernetes
    # Pipeline
    # Git
    # Configuration as Code Plugin
    # SonarQube Scanner
    # Mail Extension
    # Git Branch Source plugin

persistence:
  enabled: true
  accessMode: "ReadWriteOnce"
  storageClass: "ebs-gp3"
  size: "2Gi"

agent:
  podTemplates:
    springboot: |
      - name: springboot
        namespace: jenkins
        label: jenkins-maven
        yaml: |
          apiVersion: v1
          kind: Pod
          spec:
            containers:
              - name: maven
                image: maven:3.9.6-eclipse-temurin-17-alpine
                command:
                  - sleep
                  - infinity
                tty: true
                volumeMounts:
                  - name: maven-repo
                    mountPath: /root/.m2
                  - name: sonar-cache
                    mountPath: /root/.sonar/cache
              - name: kaniko
                image: gcr.io/kaniko-project/executor:debug
                command:
                  - sleep
                  - infinity
                tty: true
              - name: trivy
                image: 'aquasec/trivy'
                command:
                  - sleep
                  - infinity
                tty: true
                volumeMounts:
                  - name: trivy-cache
                    mountPath: /root/.cache/trivy
            volumes:
              - name: maven-repo
                persistentVolumeClaim:
                  claimName: maven-pvc
              - name: sonar-cache
                persistentVolumeClaim:
                  claimName: sonar-cache-pvc        
              - name: trivy-cache
                persistentVolumeClaim:
                  claimName: trivy-cache-pvc     
    nodejs: |
      - name: nodejs
        namespace: jenkins
        label: jenkins-nodejs
        yaml: |
          apiVersion: v1
          kind: Pod
          spec:
            serviceAccountName: jenkins
            containers:
              - name: nodejs
                image: 'node:18-alpine'
                command:
                  - sleep
                  - infinity
                tty: true
                volumeMounts:
                  - name: npm-cache
                    mountPath: /root/.npm
              - name: kaniko
                image: gcr.io/kaniko-project/executor:debug
                command:
                  - sleep
                  - infinity
                tty: true
              - name: sonar
                image: 'sonarsource/sonar-scanner-cli'
                command:
                  - sleep
                  - infinity
                tty: true
                volumeMounts:
                  - name: sonar-cache
                    mountPath: /opt/sonar-scanner/.sonar/cache
              - name: trivy
                image: 'aquasec/trivy'
                command:
                  - sleep
                  - infinity
                tty: true
                volumeMounts:
                  - name: trivy-cache
                    mountPath: /root/.cache/trivy
            volumes:
              - name: npm-cache
                persistentVolumeClaim:
                  claimName: npm-cache-pvc
              - name: sonar-cache
                persistentVolumeClaim:
                  claimName: sonar-cache-pvc        
              - name: trivy-cache
                persistentVolumeClaim:
                  claimName: trivy-cache-pvc  
    k6: |
      - name: k6
        namespace: jenkins
        label: jenkins-k6
        yaml: |
          apiVersion: v1
          kind: Pod
          spec:
            serviceAccountName: jenkins
            containers:
              - name: k6
                image: 'hungtran679/k6'
                command:
                  - sleep
                  - infinity
                tty: true     


templateVpc:
  enabled: true
  storageClass: "ebs-gp3"
  vpcs:
    - name: maven-pvc
      accessModes:
        - ReadWriteOnce
      storage: 1Gi
    - name: npm-cache-pvc
      accessModes:
        - ReadWriteOnce
      storage: 1Gi
    - name: sonar-cache-pvc
      accessModes:
        - ReadWriteOnce
      storage: 1Gi
    - name: trivy-cache-pvc
      accessModes:
        - ReadWriteOnce
      storage: 2Gi


